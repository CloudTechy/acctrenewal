# Webhook server container (runs deploy-webhook-server.js)
FROM node:22-alpine

WORKDIR /app

# Install required tools: git, curl, docker cli + compose plugin
RUN apk add --no-cache \
    git \
    curl \
    openssh-client \
    docker-cli \
    docker-cli-compose

# Copy webhook server script
COPY deploy-webhook-server.js ./deploy-webhook-server.js

EXPOSE 3001

CMD ["node", "deploy-webhook-server.js"]
